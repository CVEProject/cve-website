import { defineStore } from 'pinia';

export const useGenericGlobalsStore = defineStore('genericGlobals', {
  state: () => {
    const storedUseSearch = sessionStorage.getItem('useSearch');
    const storedCurrentServicesUrl = sessionStorage.getItem('currentServicesUrl');
    return {
      useSearch: storedUseSearch ? JSON.parse(storedUseSearch) : true, 
      currentServicesUrl: storedCurrentServicesUrl ? JSON.parse(storedCurrentServicesUrl) : `https://${import.meta.env.VITE_CVE_SERVICES_BASE_URL}`,
      legacyCveWebsiteLink: 'https://cve.mitre.org/cve/search_cve_list.html'
    };
  },
  actions: {
    setUseSearch(value) {
      this.useSearch = value;
      sessionStorage.setItem('useSearch', JSON.stringify(value)); 
    },
    setCurrentServicesUrl(value) {
      this.currentServicesUrl = value;
      sessionStorage.setItem('currentServicesUrl', JSON.stringify(value));
    }
  },
});