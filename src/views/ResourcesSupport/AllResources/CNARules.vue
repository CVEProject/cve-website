<template>
  <div id="cve-tertiary-page-main-container" class="container">
    <div class="columns is-centered">
      <div class="column is-3 is-hidden-touch">
        <TableOfContentsSidebar :nav="cvePageNavs"/>
      </div>
      <div class="column is-8-desktop cve-main-column-content-width is-12-tablet">
        <main id="cve-main-page-content" role="main">
          <h1 class="title">CVE Numbering Authority (CNA) Operational Rules</h1>
          <div role="alert" class="notification is-warning is-light">
            <div class="is-flex">
              <p id="alertIconCnaRules" class="is-hidden">alert</p>
              <font-awesome-icon style="flex: 0 0 40px;" size="1x"  icon="exclamation-triangle" role="alert"
                aria-labelledby="alertIconCnaRules" aria-hidden="false" />
              <div>
                <p>
                  The “CNA Operational Rules Version 4.0” available below was approved by the
                  <a href='/ProgramOrganization/Board'>CVE Board</a>
                  on May 9, 2024.
                </p>
                <p class="mt-4">
                  CNAs have a 90-day transition period to adjust their internal processes to comply with the new rules. On August 8, 2024, the
                  <a href='/Resources/Roles/Cnas/CNA_Rules_v3.0.pdf' target='_blank'>CNA Rules v3.0</a>
                  (view
                  <a href='/Resources/Roles/Cnas/CNA_Rules_v3.0.pdf' target='_blank'>PDF</a>)
                  will be deprecated, and CNAs will be required to comply with the CNA Rules v4.0.
                </p>
                <p class="mt-4">
                  A
                  <a href='https://events.gcc.teams.microsoft.com/event/d96f8b09-6c1b-4227-acff-0e6feaf2adcc@c620dc48-1d50-4952-8b39-df4d54d74d82'
                    target='_blank'
                  >
                    CNA Rules v4.0 Q&A Webinar
                  </a>
                  has been scheduled for June 5, 2024. CNAs may register for the webinar
                  <a href='https://events.gcc.teams.microsoft.com/event/d96f8b09-6c1b-4227-acff-0e6feaf2adcc@c620dc48-1d50-4952-8b39-df4d54d74d82'
                    target='_blank'
                  >
                    here
                  </a>.
                  If possible, please submit questions in advance using this
                  <a href='https://forms.office.com/g/KDShHyZ197' target='_blank'>web form</a>.
                </p>
              </div>
            </div>
          </div>
          <div id="cve-versionInformation">
            <p class="has-text-weight-bold">Document Version: <span>{{versionNum}}</span></p>
            <p class="has-text-weight-bold">CVE Board Approval: <span>{{versionApprovalDate}}</span></p>
            <p class="has-text-weight-bold">Effective Date: <span>{{versionDate}}</span></p>
            <p><router-link to="/Resources/Roles/Cnas/CNA_Rules_v4.0.pdf" target="_blank">View as PDF (0.2MB)</router-link></p>
          </div>
          <hr>
          <!-- Top level section -->
          <div class="content">
            <ol class="ml-0">
              <li v-for="(section, index) of cnaRulesSections" :key="index">
                <h2 class="title" :id="section.sectionId">
                  {{ section.sectionTitle }}
                </h2>
                <p v-for="(para, index) of section.sectionParagraphs" v-html="para" :key="index"></p>
                <!-- Sub section -->
                <ol class="ml-0">
                  <li v-for="(subSection, index) of section.subSections" :key="index">
                    <h3 class="title" :id="subSection.subSectionId">
                      {{ subSection.subSectionTitle }}
                    </h3>
                      <p v-for="(para, index) of subSection.subSectionParagraphs"
                      v-html="para" :key="index"></p>
                  </li>
                </ol>  <!-- end page sub section -->
              </li>
            </ol> <!-- end page section -->
            <ul class="ml-0 cve-list-no-bullet">
              <li v-for="(section, index) of cnaRulesAppendices" :key="index">
                <h2 class="title" :id="section.sectionId">
                  {{ section.sectionTitle }}
                </h2>
                <p v-for="(para, index) of section.sectionParagraphs" v-html="para" :key="index"></p>
                <!-- Sub section -->
                <ul class="ml-0 cve-list-no-bullet">
                  <li v-for="(subSection, index) of section.subSections" :key="index">
                    <h3 class="title" :id="subSection.subSectionId">
                       {{ subSection.subSectionTitle }}
                    </h3>
                    <p v-for="(para, index) of subSection.subSectionParagraphs" v-html="para" :key="index"></p>
                    <ul class="ml-0 cve-list-no-bullet"> <!-- Sub Sub section -->
                      <li v-for="(subSubSection, index) of subSection.subSubSections" :key="index">
                        <h4 class="title" :id="subSubSection.subSubSectionId">
                          {{ subSubSection.subSubSectionTitle }}
                        </h4>
                        <p v-for="(para, index) of subSubSection.subSubSectionParagraphs" v-html="para" :key="index"></p>
                      </li>
                    </ul> <!-- end apendices sub sub section -->
                  </li>
                </ul>  <!-- end appendices sub section -->
              </li>
            </ul> <!-- end appendicessection -->
         </div>
        </main>
      </div>
    </div>             <!-- end columns -->
  </div>
</template>

<script>
import TableOfContentsSidebar from '@/components/TableOfContentsSidebar.vue';
import cnaRulesData from '@/assets/data/cnaRules.json';

export default {
  name: 'CNARules',
  components: {
    TableOfContentsSidebar,
  },
  data() {
    return {
      versionNum: cnaRulesData.versionNumber,
      versionApprovalDate: cnaRulesData.versionApprovalDate,
      versionDate: cnaRulesData.versionDate,
      cnaRulesSections: cnaRulesData.pageSections,
      cnaRulesAppendices: cnaRulesData.appendices,
      cvePageNavs: cnaRulesData,
    };
  },
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped lang="scss">
@import '@/assets/style/globals.scss';

ol { counter-reset: item; }
ol li {display: block;}
ol li p, ul li p {
  margin-bottom: 16px;
}
ol li h2::before, ol li h3::before {
  content: counters(item, ".");
  counter-increment: item;
  margin-right: 0.5rem;
}

:deep(.cve-acronym),
:deep(.cve-acronym-definition) {
  display: block;
}
</style>
